You are the Replit Core AI Agent. Perform a full-feature audit and enhancement of the *WebRTC live room system* and *Mentor Dashboard â€“ My Sessions* module in PeerLearn. Ensure all flows, buttons, sub-tabs, real-time status updates, and video/audio features work flawlessly for both learners and mentors. Use Django+Channels+SQLite3+TailwindCSS+Alpine.js. Include all fixes, real-time enhancements, and error handling logic. No further input needed.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. GO LIVE & JOIN ROOM â€“ END-TO-END FLOW
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ âœ… Mentor clicks *Go Live â–¶*:
   â€“ Route: /dashboard/mentor/my-sessions
   â€“ Check: session.status == 'scheduled' and current_time â‰¥ start_time - 15 mins
   â€“ Action: POST /api/sessions/{id}/go_live/ â†’ status='live', started_at=now()
   â€“ Result: redirect to /session/{room_code}/, WS session.live broadcast

â€¢ âœ… Learner sees Join â–¶ (Tâ€“5m):
   â€“ Route: /dashboard/learner/activity
   â€“ Checks Booking.confirmed + session.status == 'live'
   â€“ Action: GET /api/sessions/{id}/authorize_join/
   â€“ Result: redirect to /session/{room_code}/

â€¢ âœ… BOTH ROLES enter /session/{room_code}/:
   â€“ Auth check: only mentor or booked learner
   â€“ WS: connect to sessions:{room_code}
   â€“ Lobby: show whoâ€™s present (learner.join)
   â€“ Video: peer-to-peer via STUN/TURN; auto fallback audio

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2. VIDEO/AUDIO CAMERA ENSUREMENT
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ âœ… WebRTC camera/audio connection:
   â€“ Use navigator.mediaDevices.getUserMedia({ video: true, audio: true })
   â€“ Handle device errors:
     - â€œPermission deniedâ€ â†’ toast + audio-only fallback
     - â€œDevice not foundâ€ â†’ toast â€œCamera/Mic missingâ€

â€¢ âœ… Mentor video shows full-width (desktop) or full-height (mobile)
â€¢ âœ… Learner video appears in secondary pane
â€¢ âœ… Reconnection logic:
   â€“ WS ping/pong to detect disconnects
   â€“ If crash or reload: auto resume session if time < end_time
   â€“ ICE restart on retry

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
3. MENTOR DASHBOARD: MY SESSIONS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ âœ… Sub-tabs:
   â€“ Today: shows sessions for current date
   â€“ Upcoming: future sessions (status='scheduled')
   â€“ Past: completed or cancelled

â€¢ âœ… Real-time updates:
   â€“ WS sessions:{mentor_id} receives:
     â€¢ new_bookings (update "Booked (N)")
     â€¢ learner.join (show attendee toast)
     â€¢ session.live (show â€œLIVE NOWâ€ badge)
     â€¢ session.cancelled or ended

â€¢ âœ… Buttons:
   â€“ Go Live â–¶ (enabled in valid window only)
   â€“ Edit âœ (enabled until 5 min before start)
   â€“ Cancel ğŸ—‘ (allowed until session starts)

â€¢ âœ… Countdown timer (hh:mm:ss) powered by Alpine.js
â€¢ âœ… WS triggers immediate UI updates across:
   â€“ Landing page
   â€“ Learner dashboards
   â€“ Mentor my-sessions

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
4. ERROR HANDLING
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ Network issues:
   â€“ Toast: â€œNetwork lost. Reconnectingâ€¦â€
   â€“ Retry every 5s until WS/session restored

â€¢ Media issues:
   â€“ Fallback to audio-only if camera fails
   â€“ Prompt: â€œYour camera is not availableâ€

â€¢ Go Live errors:
   â€“ If session already started â†’ toast â€œAlready liveâ€
   â€“ If session expired â†’ toast â€œTime over â€“ session endedâ€

â€¢ Join errors:
   â€“ Unauthorized access â†’ toast â€œBook this session firstâ€
   â€“ Session not live â†’ toast â€œMentor has not started the session yetâ€

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
5. ENSURE FULL FUNCTIONALITY & SECURITY
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ âœ… CSRF protection, role-check middleware on all views
â€¢ âœ… Secure STUN/TURN credentials in ENV
â€¢ âœ… SQLite3 persistence for all models
â€¢ âœ… WS auth via Django Tokens

â€¢ âœ… All expected flows:
   â€“ Mentor publishes â†’ Learner books â†’ Mentor goes live â†’ Learner joins â†’ Both see video â†’ Session ends â†’ Feedback

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
6. DELIVERABLES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ All corrected views, templates, consumers, Alpine.js logic, and Django routes
â€¢ Full UI/UX real-time flows across Mentor and Learner Dashboards
â€¢ WebRTC room page that works 100% with dual video, chat, fallback, and analytics
â€¢ Test scripts to confirm Go Live, Join, and reconnect scenarios work
â€¢ Final message: â€œMain features fully operational. Video/Audio confirmed. All real-time flows functional.â€

Use this prompt to ensure PeerLearnâ€™s core live session flow works reliably with all UI, camera, WS, DB, and real-time updates fully integrated.