{% extends 'base.html' %}
{% load template_utils %}

{% block title %}PeerLearn - One-to-One Live Learning Platform{% endblock %}

{% block content %}
<!-- Fixed Top Navigation -->
<nav class="fixed top-0 inset-x-0 z-50 bg-white shadow-md transition-all duration-300" x-data="{ scrolled: false, mobileMenuOpen: false }" @scroll.window="scrolled = (window.pageYOffset > 20)" :class="{ 'py-2': scrolled, 'py-4': !scrolled }">
    <div class="container mx-auto px-4">
        <div class="flex justify-between items-center">
            <!-- Logo -->
            <a href="{% url 'home' %}" class="flex items-center">
                <span class="text-2xl font-bold text-primary-600">PeerLearn</span>
            </a>
            
            <!-- Desktop Navigation -->
            <div class="hidden md:flex space-x-8 items-center">
                <a href="{% url 'home' %}" class="font-medium text-gray-700 hover:text-primary-600 transition-colors">Home</a>
                <a href="{% url 'sessions:list' %}" class="font-medium text-gray-700 hover:text-primary-600 transition-colors">Sessions</a>
                <a href="#" class="font-medium text-gray-700 hover:text-primary-600 transition-colors">Mentors</a>
                <a href="#" class="font-medium text-gray-700 hover:text-primary-600 transition-colors">About</a>
                <a href="{% url 'users:login' %}" class="font-medium text-gray-700 hover:text-primary-600 transition-colors">Login</a>
                <a href="{% url 'users:auth_selector' %}" class="bg-primary-600 text-white hover:bg-primary-700 px-4 py-2 rounded-md font-medium transition-colors">Sign Up</a>
            </div>
            
            <!-- Mobile menu button -->
            <button @click="mobileMenuOpen = !mobileMenuOpen" class="md:hidden text-gray-500 hover:text-gray-700 focus:outline-none">
                <svg x-show="!mobileMenuOpen" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                </svg>
                <svg x-show="mobileMenuOpen" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" style="display: none;">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
        </div>
        
        <!-- Mobile menu -->
        <div x-show="mobileMenuOpen" class="md:hidden mt-4 pb-4" style="display: none;" @click.away="mobileMenuOpen = false">
            <div class="flex flex-col space-y-4">
                <a href="{% url 'home' %}" class="font-medium text-gray-700 hover:text-primary-600 transition-colors">Home</a>
                <a href="{% url 'sessions:list' %}" class="font-medium text-gray-700 hover:text-primary-600 transition-colors">Sessions</a>
                <a href="#" class="font-medium text-gray-700 hover:text-primary-600 transition-colors">Mentors</a>
                <a href="#" class="font-medium text-gray-700 hover:text-primary-600 transition-colors">About</a>
                <a href="{% url 'users:login' %}" class="font-medium text-gray-700 hover:text-primary-600 transition-colors">Login</a>
                <a href="{% url 'users:auth_selector' %}" class="bg-primary-600 text-white hover:bg-primary-700 px-4 py-2 rounded-md font-medium transition-colors text-center">Sign Up</a>
            </div>
        </div>
    </div>
</nav>

<!-- Spacer for fixed navbar -->
<div class="h-20"></div>

<!-- Hero Section -->
<section class="bg-gradient-to-br from-primary-600 to-primary-800 text-white">
    <div class="container mx-auto px-4 py-16 md:py-24">
        <div class="flex flex-col md:flex-row items-center">
            <div class="md:w-1/2 mb-10 md:mb-0">
                <h1 class="text-4xl md:text-5xl font-bold leading-tight mb-4">
                    Learn Anything, Anytime, from Expert Mentors
                </h1>
                <p class="text-xl md:text-2xl text-blue-100 mb-8">
                    PeerLearn connects you with experienced mentors for personalized 1:1 live sessions.
                </p>
                <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4">
                    <a href="{% url 'users:auth_selector' %}" 
                       class="bg-white text-primary-600 hover:bg-blue-50 px-6 py-3 rounded-lg font-semibold text-center transform hover:scale-105 transition-all duration-200 flex items-center justify-center"
                       x-data x-on:click.prevent="$dispatch('open-modal', 'auth-selector-modal')">
                        Get Started <span class="ml-1">‚ñ∂</span>
                    </a>
                    <a href="{% url 'sessions:list' %}" class="border border-white text-white hover:bg-white hover:text-primary-600 px-6 py-3 rounded-lg font-semibold text-center transition-all duration-200 transform hover:scale-105">
                        Browse Sessions
                    </a>
                </div>
            </div>
            <div class="md:w-1/2 flex justify-center">
                <div class="relative w-full max-w-md">
                    <!-- Lottie animation will be loaded here -->
                    <div id="hero-animation" class="w-full h-64 md:h-80">
                        <!-- Fallback image for no-JS -->
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-full h-full">
                            <path d="M5.52 19c.64-2.2 1.84-3 3.22-3h6.52c1.38 0 2.58.8 3.22 3"/>
                            <circle cx="12" cy="10" r="3"/>
                            <circle cx="12" cy="12" r="10"/>
                        </svg>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Live & Upcoming Sessions -->
<section class="py-12 bg-gray-50">
    <div class="container mx-auto px-4">
        <div class="mb-8 text-center">
            <h2 class="text-3xl font-bold text-gray-900 mb-2">Live & Upcoming Sessions</h2>
            <p class="text-lg text-gray-600">Join interactive sessions with top mentors</p>
        </div>
        
        <!-- Category Tabs - Horizontally Scrollable on Mobile -->
        <div class="mb-6 flex justify-start overflow-x-auto pb-2 hide-scrollbar" x-data="{ activeTab: 'all' }">
            <div class="inline-flex space-x-2 px-4">
                <button 
                    @click="activeTab = 'all'" 
                    :class="{ 'bg-primary-600 text-white': activeTab === 'all', 'bg-white text-gray-700 hover:bg-gray-100': activeTab !== 'all' }"
                    class="px-4 py-2 rounded-full font-medium text-sm transition-colors whitespace-nowrap"
                >
                    All
                </button>
                
                {% for category in categories %}
                {% if category.active %}
                <button 
                    @click="activeTab = '{{ category.name|slugify }}'" 
                    :class="{ 'bg-primary-600 text-white': activeTab === '{{ category.name|slugify }}', 'bg-white text-gray-700 hover:bg-gray-100': activeTab !== '{{ category.name|slugify }}' }"
                    class="px-4 py-2 rounded-full font-medium text-sm transition-colors whitespace-nowrap"
                >
                    {{ category.name }} <span class="text-xs ml-1">({{ category_counts|get_item:category.name }})</span>
                </button>
                {% endif %}
                {% endfor %}
            </div>
        </div>
        
        <!-- Sessions Grid/Carousel -->
        <div class="relative" x-data="{ activeSlide: 0 }">
            <!-- Prev Button -->
            <button 
                @click="activeSlide = (activeSlide - 1 + Math.ceil({{ all_sessions.count }} / 3)) % Math.ceil({{ all_sessions.count }} / 3)"
                class="absolute left-0 top-1/2 transform -translate-y-1/2 z-10 bg-white rounded-full p-2 shadow-md text-gray-600 hover:text-primary-600 focus:outline-none md:-ml-5 lg:-ml-6 hidden md:block"
                aria-label="Previous slide"
            >
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                </svg>
            </button>
            
            <!-- Sessions Container -->
            <div class="overflow-hidden" x-data="{ 
                sessions: {
                    'all': {{ all_sessions|default:'[]'|safe }},
                    {% for category in categories %}
                    {% if category.active %}
                    '{{ category.name|slugify }}': {{ sessions_by_category|get_item:category.name|default:'[]'|safe }},
                    {% endif %}
                    {% endfor %}
                },
                visibleSessions: function() {
                    return this.sessions[this.activeTab] || this.sessions['all'];
                }
            }">
                <div class="flex transition-transform duration-300 ease-in-out" :style="{ transform: `translateX(-${activeSlide * 100}%)` }">
                    <!-- Slides with Live Sessions -->
                    {% if live_sessions %}
                    <div class="w-full flex-shrink-0 px-4">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            {% for session in live_sessions %}
                            <!-- Live Session Card -->
                            <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow transform hover:scale-[1.02]">
                                <div class="relative">
                                    <!-- Live badge -->
                                    <div class="absolute top-3 left-3 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full flex items-center">
                                        <span class="animate-pulse mr-1 h-2 w-2 bg-white rounded-full"></span>
                                        LIVE NOW
                                    </div>
                                    
                                    <!-- Attendees count -->
                                    <div class="absolute top-3 right-3 bg-black bg-opacity-60 text-white text-xs px-2 py-1 rounded-full">
                                        <span>{{ session.bookings.count }} attending</span>
                                    </div>
                                    
                                    <div class="h-40 bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center">
                                        <span class="text-4xl">
                                            {% if session.topics|first == 'Programming' %}üíª
                                            {% elif session.topics|first == 'Design' %}üé®
                                            {% elif session.topics|first == 'Business' %}üíº
                                            {% elif session.topics|first == 'Science' %}üî¨
                                            {% elif session.topics|first == 'Language' %}üåê
                                            {% elif session.topics|first == 'Music' %}üéµ
                                            {% elif session.topics|first == 'Cooking' %}üç≥
                                            {% else %}üìö{% endif %}
                                        </span>
                                    </div>
                                </div>
                                <div class="p-5">
                                    <div class="flex justify-between mb-2">
                                        <span class="text-xs font-semibold px-2 py-1 bg-blue-100 text-blue-800 rounded-full">{{ session.topics|first|default:"General" }}</span>
                                        <span class="text-sm text-gray-600">{{ session.duration }} mins</span>
                                    </div>
                                    <h3 class="text-lg font-bold text-gray-900 mb-1">{{ session.title }}</h3>
                                    <p class="text-sm text-gray-700 mb-3">{{ session.description|truncatechars:60 }}</p>
                                    <div class="flex items-center mb-3">
                                        <div class="h-8 w-8 rounded-full bg-gray-200 mr-2 flex-shrink-0 overflow-hidden">
                                            {% if session.mentor.profile_picture %}
                                                <img src="{{ session.mentor.profile_picture.url }}" alt="{{ session.mentor.username }}" class="w-full h-full object-cover">
                                            {% else %}
                                                {{ session.mentor.username|slice:":2"|upper }}
                                            {% endif %}
                                        </div>
                                        <span class="text-sm font-medium">{{ session.mentor.get_full_name|default:session.mentor.username }}</span>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span class="font-bold text-primary-600">{% if session.is_free %}Free{% else %}${{ session.price }}{% endif %}</span>
                                        <a href="{% url 'sessions:detail' session.id %}" class="bg-primary-600 text-white hover:bg-primary-700 px-4 py-2 rounded-lg text-sm font-semibold transition-colors">
                                            Join ‚ñ∂
                                        </a>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                            
                            <!-- Fill remaining slots with upcoming sessions -->
                            {% with remaining_slots=3|subtract:live_sessions.count %}
                            {% if remaining_slots > 0 and upcoming_sessions %}
                                {% for session in upcoming_sessions|slice:":"|add:remaining_slots %}
                                <!-- Upcoming Session Card -->
                                <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow transform hover:scale-[1.02]">
                                    <div class="relative">
                                        <!-- Countdown -->
                                        <div class="absolute top-3 left-3 bg-yellow-500 text-white text-xs font-bold px-2 py-1 rounded-full">
                                            Starts {{ session.schedule|timeuntil }}
                                        </div>
                                        
                                        <div class="h-40 bg-gradient-to-br 
                                            {% if session.topics|first == 'Design' %}from-green-400 to-teal-500
                                            {% elif session.topics|first == 'Business' %}from-yellow-400 to-orange-500
                                            {% elif session.topics|first == 'Science' %}from-indigo-400 to-purple-500
                                            {% elif session.topics|first == 'Language' %}from-red-400 to-pink-500
                                            {% elif session.topics|first == 'Music' %}from-pink-400 to-red-500
                                            {% elif session.topics|first == 'Cooking' %}from-orange-400 to-red-500
                                            {% else %}from-blue-400 to-indigo-500{% endif %}
                                            flex items-center justify-center">
                                            <span class="text-4xl">
                                                {% if session.topics|first == 'Programming' %}üíª
                                                {% elif session.topics|first == 'Design' %}üé®
                                                {% elif session.topics|first == 'Business' %}üíº
                                                {% elif session.topics|first == 'Science' %}üî¨
                                                {% elif session.topics|first == 'Language' %}üåê
                                                {% elif session.topics|first == 'Music' %}üéµ
                                                {% elif session.topics|first == 'Cooking' %}üç≥
                                                {% else %}üìö{% endif %}
                                            </span>
                                        </div>
                                    </div>
                                    <div class="p-5">
                                        <div class="flex justify-between mb-2">
                                            <span class="text-xs font-semibold px-2 py-1 
                                                {% if session.topics|first == 'Programming' %}bg-blue-100 text-blue-800
                                                {% elif session.topics|first == 'Design' %}bg-green-100 text-green-800
                                                {% elif session.topics|first == 'Business' %}bg-yellow-100 text-yellow-800
                                                {% elif session.topics|first == 'Science' %}bg-purple-100 text-purple-800
                                                {% elif session.topics|first == 'Language' %}bg-red-100 text-red-800
                                                {% elif session.topics|first == 'Music' %}bg-pink-100 text-pink-800
                                                {% elif session.topics|first == 'Cooking' %}bg-orange-100 text-orange-800
                                                {% else %}bg-gray-100 text-gray-800{% endif %}
                                                rounded-full">
                                                {{ session.topics|first|default:"General" }}
                                            </span>
                                            <span class="text-sm text-gray-600">{{ session.duration }} mins</span>
                                        </div>
                                        <h3 class="text-lg font-bold text-gray-900 mb-1">{{ session.title }}</h3>
                                        <p class="text-sm text-gray-700 mb-3">{{ session.description|truncatechars:60 }}</p>
                                        <div class="flex items-center mb-3">
                                            <div class="h-8 w-8 rounded-full bg-gray-200 mr-2 flex-shrink-0 overflow-hidden">
                                                {% if session.mentor.profile_picture %}
                                                    <img src="{{ session.mentor.profile_picture.url }}" alt="{{ session.mentor.username }}" class="w-full h-full object-cover">
                                                {% else %}
                                                    {{ session.mentor.username|slice:":2"|upper }}
                                                {% endif %}
                                            </div>
                                            <span class="text-sm font-medium">{{ session.mentor.get_full_name|default:session.mentor.username }}</span>
                                        </div>
                                        <div class="flex justify-between items-center">
                                            <span class="font-bold text-primary-600">{% if session.is_free %}Free{% else %}${{ session.price }}{% endif %}</span>
                                            <a href="{% url 'sessions:detail' session.id %}" class="bg-primary-600 text-white hover:bg-primary-700 px-4 py-2 rounded-lg text-sm font-semibold transition-colors">
                                                Book ‚ñ∂
                                            </a>
                                        </div>
                                    </div>
                                </div>
                                {% endfor %}
                            {% endif %}
                            {% endwith %}
                        </div>
                    </div>
                    {% endif %}
                    
                    <!-- Upcoming Sessions -->
                    {% if upcoming_sessions %}
                    <div class="w-full flex-shrink-0 px-4 {% if live_sessions %}hidden{% endif %}">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            {% for session in upcoming_sessions|slice:":3" %}
                            <!-- Upcoming Session Card -->
                            <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow transform hover:scale-[1.02]">
                                <div class="relative">
                                    <!-- Countdown -->
                                    <div class="absolute top-3 left-3 bg-yellow-500 text-white text-xs font-bold px-2 py-1 rounded-full">
                                        Starts {{ session.schedule|timeuntil }}
                                    </div>
                                    
                                    <div class="h-40 bg-gradient-to-br 
                                        {% if session.topics|first == 'Design' %}from-green-400 to-teal-500
                                        {% elif session.topics|first == 'Business' %}from-yellow-400 to-orange-500
                                        {% elif session.topics|first == 'Science' %}from-indigo-400 to-purple-500
                                        {% elif session.topics|first == 'Language' %}from-red-400 to-pink-500
                                        {% elif session.topics|first == 'Music' %}from-pink-400 to-red-500
                                        {% elif session.topics|first == 'Cooking' %}from-orange-400 to-red-500
                                        {% else %}from-blue-400 to-indigo-500{% endif %}
                                        flex items-center justify-center">
                                        <span class="text-4xl">
                                            {% if session.topics|first == 'Programming' %}üíª
                                            {% elif session.topics|first == 'Design' %}üé®
                                            {% elif session.topics|first == 'Business' %}üíº
                                            {% elif session.topics|first == 'Science' %}üî¨
                                            {% elif session.topics|first == 'Language' %}üåê
                                            {% elif session.topics|first == 'Music' %}üéµ
                                            {% elif session.topics|first == 'Cooking' %}üç≥
                                            {% else %}üìö{% endif %}
                                        </span>
                                    </div>
                                </div>
                                <div class="p-5">
                                    <div class="flex justify-between mb-2">
                                        <span class="text-xs font-semibold px-2 py-1 
                                            {% if session.topics|first == 'Programming' %}bg-blue-100 text-blue-800
                                            {% elif session.topics|first == 'Design' %}bg-green-100 text-green-800
                                            {% elif session.topics|first == 'Business' %}bg-yellow-100 text-yellow-800
                                            {% elif session.topics|first == 'Science' %}bg-purple-100 text-purple-800
                                            {% elif session.topics|first == 'Language' %}bg-red-100 text-red-800
                                            {% elif session.topics|first == 'Music' %}bg-pink-100 text-pink-800
                                            {% elif session.topics|first == 'Cooking' %}bg-orange-100 text-orange-800
                                            {% else %}bg-gray-100 text-gray-800{% endif %}
                                            rounded-full">
                                            {{ session.topics|first|default:"General" }}
                                        </span>
                                        <span class="text-sm text-gray-600">{{ session.duration }} mins</span>
                                    </div>
                                    <h3 class="text-lg font-bold text-gray-900 mb-1">{{ session.title }}</h3>
                                    <p class="text-sm text-gray-700 mb-3">{{ session.description|truncatechars:60 }}</p>
                                    <div class="flex items-center mb-3">
                                        <div class="h-8 w-8 rounded-full bg-gray-200 mr-2 flex-shrink-0 overflow-hidden">
                                            {% if session.mentor.profile_picture %}
                                                <img src="{{ session.mentor.profile_picture.url }}" alt="{{ session.mentor.username }}" class="w-full h-full object-cover">
                                            {% else %}
                                                {{ session.mentor.username|slice:":2"|upper }}
                                            {% endif %}
                                        </div>
                                        <span class="text-sm font-medium">{{ session.mentor.get_full_name|default:session.mentor.username }}</span>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span class="font-bold text-primary-600">{% if session.is_free %}Free{% else %}${{ session.price }}{% endif %}</span>
                                        <a href="{% url 'sessions:detail' session.id %}" class="bg-primary-600 text-white hover:bg-primary-700 px-4 py-2 rounded-lg text-sm font-semibold transition-colors">
                                            Book ‚ñ∂
                                        </a>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}
                    
                    {% if not live_sessions and not upcoming_sessions %}
                    <!-- Empty State -->
                    <div class="w-full flex-shrink-0 px-4">
                        <div class="grid grid-cols-1 md:grid-cols-1 gap-6">
                            <div class="bg-white rounded-lg p-8 text-center shadow-md">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto text-gray-400 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                </svg>
                                <h3 class="text-xl font-bold text-gray-900 mb-2">No sessions available</h3>
                                <p class="text-gray-600 mb-6">There are currently no sessions scheduled. Check back soon or browse other categories.</p>
                                <a href="{% url 'users:auth_selector' %}" class="bg-primary-600 text-white hover:bg-primary-700 px-6 py-2 rounded-lg text-sm font-semibold inline-block transition-colors">
                                    Become a Mentor ‚ñ∂
                                </a>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>
            
            <!-- Next Button -->
            <button 
                @click="activeSlide = (activeSlide + 1) % Math.ceil({{ all_sessions.count|default:1 }} / 3)"
                class="absolute right-0 top-1/2 transform -translate-y-1/2 z-10 bg-white rounded-full p-2 shadow-md text-gray-600 hover:text-primary-600 focus:outline-none md:-mr-5 lg:-mr-6 hidden md:block"
                aria-label="Next slide"
            >
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                </svg>
            </button>
            
            <!-- Carousel Indicators -->
            <div class="flex justify-center mt-6">
                {% with slides_count=all_sessions.count|default:1|divide_by:3|add:1 %}
                {% for i in slides_count|range_list %}
                <button 
                    @click="activeSlide = {{ i }}" 
                    :class="{ 'bg-primary-600': activeSlide === {{ i }}, 'bg-gray-300': activeSlide !== {{ i }} }"
                    class="h-2 w-2 rounded-full mx-1 focus:outline-none transition-colors"
                ></button>
                {% endfor %}
                {% endwith %}
            </div>
        </div>
        
        <div class="text-center mt-8">
            <a href="{% url 'sessions:list' %}" class="text-primary-600 hover:text-primary-700 font-semibold inline-flex items-center transform hover:translate-x-1 transition-transform">
                <span>View All Sessions</span>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
                </svg>
            </a>
        </div>
    </div>
</section>

<!-- Featured Mentors -->
<section class="py-12 bg-white">
    <div class="container mx-auto px-4">
        <div class="mb-8 text-center">
            <h2 class="text-3xl font-bold text-gray-900 mb-2">Top Mentors</h2>
            <p class="text-lg text-gray-600">Learn from experienced professionals in your field</p>
        </div>
        
        <!-- Mentor Cards - Horizontally Scrollable on Mobile -->
        <div class="relative overflow-x-auto pb-8 hide-scrollbar">
            <div class="flex space-x-6 px-4 md:grid md:grid-cols-4 md:gap-6 md:space-x-0">
                {% for mentor in featured_mentors %}
                <div class="flex-shrink-0 w-60 md:w-auto bg-white rounded-lg shadow text-center p-6 hover:shadow-lg transition-shadow transform hover:scale-[1.02]">
                    <div class="h-24 w-24 rounded-full bg-gray-200 mx-auto mb-4 overflow-hidden">
                        {% if mentor.profile_picture %}
                            <img src="{{ mentor.profile_picture.url }}" alt="{{ mentor.username }}" class="w-full h-full object-cover">
                        {% else %}
                            <div class="w-full h-full flex items-center justify-center text-gray-500 font-bold text-xl">
                                {{ mentor.username|slice:":2"|upper }}
                            </div>
                        {% endif %}
                    </div>
                    <h3 class="font-bold text-gray-900">{{ mentor.get_full_name|default:mentor.username }}</h3>
                    <p class="text-sm text-gray-600 mb-2">{{ mentor.expertise|first|default:"Mentor" }}</p>
                    <div class="flex justify-center mb-3">
                        <!-- Star Rating -->
                        <div class="flex text-yellow-400">
                            {% with rating=mentor.rating_avg|default:0 %}
                                {% for i in "12345"|make_list %}
                                    {% if forloop.counter <= rating|floatformat:"0"|add:"0" %}
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                                            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                                        </svg>
                                    {% else %}
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" />
                                        </svg>
                                    {% endif %}
                                {% endfor %}
                            {% endwith %}
                        </div>
                    </div>
                    <a href="#" class="inline-block text-sm font-semibold text-primary-600 hover:text-primary-700 transform hover:translate-x-1 transition-all duration-200">
                        View Profile ‚Üí
                    </a>
                </div>
                {% empty %}
                <!-- Empty State for Mentors -->
                <div class="col-span-4 bg-white rounded-lg p-8 text-center shadow-sm">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto text-gray-400 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
                    </svg>
                    <h3 class="text-xl font-bold text-gray-900 mb-2">No Mentors Available</h3>
                    <p class="text-gray-600 mb-6">We're currently onboarding new mentors. Check back soon!</p>
                    <a href="{% url 'users:auth_selector' %}" class="bg-primary-600 text-white hover:bg-primary-700 px-6 py-2 rounded-lg text-sm font-semibold inline-block transition-colors">
                        Become a Mentor ‚Üí
                    </a>
                </div>
                {% endfor %}
            </div>
        </div>
        
        <div class="text-center mt-4">
            <a href="#" class="text-primary-600 hover:text-primary-700 font-semibold inline-flex items-center transform hover:translate-x-1 transition-transform">
                <span>View All Mentors</span>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
                </svg>
            </a>
        </div>
    </div>
</section>

<!-- How It Works -->
<section class="py-12 bg-gray-50">
    <div class="container mx-auto px-4">
        <div class="mb-10 text-center">
            <h2 class="text-3xl font-bold text-gray-900 mb-2">How PeerLearn Works</h2>
            <p class="text-lg text-gray-600">Simple steps to start learning with expert mentors</p>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-10">
            <div class="text-center">
                <div class="bg-primary-100 text-primary-600 rounded-full h-16 w-16 flex items-center justify-center mx-auto mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                    </svg>
                </div>
                <h3 class="text-xl font-bold text-gray-900 mb-2">Find Your Mentor</h3>
                <p class="text-gray-600">Browse through our community of expert mentors and find the perfect match for your learning goals.</p>
            </div>
            
            <div class="text-center">
                <div class="bg-primary-100 text-primary-600 rounded-full h-16 w-16 flex items-center justify-center mx-auto mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                    </svg>
                </div>
                <h3 class="text-xl font-bold text-gray-900 mb-2">Book a Session</h3>
                <p class="text-gray-600">Schedule a one-on-one live session at a time that works for you, with instant confirmation.</p>
            </div>
            
            <div class="text-center">
                <div class="bg-primary-100 text-primary-600 rounded-full h-16 w-16 flex items-center justify-center mx-auto mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" />
                    </svg>
                </div>
                <h3 class="text-xl font-bold text-gray-900 mb-2">Learn Live</h3>
                <p class="text-gray-600">Join your personalized live session with video, audio, screen sharing, and collaborative tools.</p>
            </div>
        </div>
    </div>
</section>

<!-- CTA -->
<section class="py-16 bg-gradient-to-br from-primary-600 to-primary-800 text-white">
    <div class="container mx-auto px-4 text-center">
        <h2 class="text-3xl md:text-4xl font-bold mb-4">Ready to Accelerate Your Learning?</h2>
        <p class="text-xl text-blue-100 mb-8 max-w-2xl mx-auto">Join PeerLearn today and connect with expert mentors who can help you reach your goals faster through personalized live sessions.</p>
        <div class="flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4">
            <a href="{% url 'users:auth_selector' %}" class="bg-white text-primary-600 hover:bg-blue-50 px-8 py-3 rounded-lg font-semibold transform hover:scale-105 transition-all duration-200">
                Get Started Now ‚Üí
            </a>
            <a href="{% url 'sessions:list' %}" class="border border-white text-white hover:bg-white hover:text-primary-600 px-8 py-3 rounded-lg font-semibold transition-all duration-200 transform hover:scale-105">
                Browse Sessions
            </a>
        </div>
    </div>
</section>

<!-- Footer -->
<footer class="bg-gray-900 text-white py-12">
    <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
            <div>
                <h3 class="text-xl font-bold mb-4">PeerLearn</h3>
                <p class="text-gray-400 mb-4">Connect with expert mentors for personalized 1:1 live learning sessions.</p>
                <div class="flex space-x-4">
                    <a href="#" class="text-gray-400 hover:text-white transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"/>
                        </svg>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-white transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/>
                        </svg>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-white transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                        </svg>
                    </a>
                </div>
            </div>
            
            <div>
                <h4 class="text-lg font-semibold mb-4">Platform</h4>
                <ul class="space-y-2">
                    <li><a href="{% url 'sessions:list' %}" class="text-gray-400 hover:text-white transition-colors">Browse Sessions</a></li>
                    <li><a href="{% url 'users:mentor_list' %}" class="text-gray-400 hover:text-white transition-colors">Find Mentors</a></li>
                    <li><a href="#" class="text-gray-400 hover:text-white transition-colors">Become a Mentor</a></li>
                    <li><a href="#" class="text-gray-400 hover:text-white transition-colors">How It Works</a></li>
                </ul>
            </div>
            
            <div>
                <h4 class="text-lg font-semibold mb-4">Company</h4>
                <ul class="space-y-2">
                    <li><a href="#" class="text-gray-400 hover:text-white transition-colors">About Us</a></li>
                    <li><a href="#" class="text-gray-400 hover:text-white transition-colors">Careers</a></li>
                    <li><a href="#" class="text-gray-400 hover:text-white transition-colors">Blog</a></li>
                    <li><a href="#" class="text-gray-400 hover:text-white transition-colors">Press</a></li>
                </ul>
            </div>
            
            <div>
                <h4 class="text-lg font-semibold mb-4">Legal</h4>
                <ul class="space-y-2">
                    <li><a href="#" class="text-gray-400 hover:text-white transition-colors">Terms of Service</a></li>
                    <li><a href="#" class="text-gray-400 hover:text-white transition-colors">Privacy Policy</a></li>
                    <li><a href="#" class="text-gray-400 hover:text-white transition-colors">Cookie Policy</a></li>
                    <li><a href="#" class="text-gray-400 hover:text-white transition-colors">Contact</a></li>
                </ul>
            </div>
        </div>
        
        <div class="border-t border-gray-800 mt-12 pt-8 text-center text-gray-400">
            <p>&copy; {% now "Y" %} PeerLearn. All rights reserved.</p>
        </div>
    </div>
</footer>

<!-- Auth Selector Modal -->
<div id="auth-selector-modal" x-data="{ open: false }" x-show="open" @open-modal.window="if ($event.detail === 'auth-selector-modal') open = true" @keydown.escape.window="open = false" style="display: none;" class="fixed inset-0 overflow-y-auto z-50">
    <div class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center">
        <div class="fixed inset-0 transition-opacity" aria-hidden="true" @click="open = false">
            <div class="absolute inset-0 bg-gray-500 opacity-75"></div>
        </div>
        
        <div class="bg-white rounded-lg overflow-hidden shadow-xl transform transition-all max-w-lg w-full">
            <div class="p-6">
                <h3 class="text-2xl font-bold text-gray-900 mb-6 text-center">Join PeerLearn</h3>
                
                <div class="grid grid-cols-1 gap-6">
                    <a href="{% url 'users:signup_learner' %}" class="border border-gray-300 bg-white hover:bg-gray-50 rounded-lg px-4 py-6 text-center transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-primary-600 mx-auto mb-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
                        </svg>
                        <h4 class="text-xl font-bold text-gray-900 mb-2">I want to learn</h4>
                        <p class="text-gray-600">Book sessions with expert mentors and access personalized learning.</p>
                    </a>
                    
                    <a href="{% url 'users:signup_mentor' %}" class="border border-gray-300 bg-white hover:bg-gray-50 rounded-lg px-4 py-6 text-center transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-primary-600 mx-auto mb-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z" />
                        </svg>
                        <h4 class="text-xl font-bold text-gray-900 mb-2">I want to teach</h4>
                        <p class="text-gray-600">Share your knowledge, earn money, and help others grow.</p>
                    </a>
                </div>
                
                <div class="mt-6 text-center">
                    <p class="text-gray-600">Already have an account? <a href="{% url 'users:login' %}" class="text-primary-600 hover:text-primary-700 font-semibold">Log In</a></p>
                </div>
            </div>
            
            <div class="bg-gray-50 px-4 py-3 flex justify-end">
                <button @click="open = false" class="text-gray-500 hover:text-gray-700 font-medium">
                    Close
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Additional Styles -->
<style>
    .hide-scrollbar::-webkit-scrollbar {
        display: none; /* Safari and Chrome */
    }
    
    .hide-scrollbar {
        -ms-overflow-style: none;  /* IE and Edge */
        scrollbar-width: none;  /* Firefox */
    }
    
    @keyframes skeleton-loading {
        0% {
            background-position: 100% 50%;
        }
        100% {
            background-position: 0 50%;
        }
    }
    
    .skeleton {
        background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
        background-size: 200% 100%;
        animation: skeleton-loading 1.5s ease-in-out infinite;
    }
</style>

<!-- Load Lottie animation and JavaScript for interactive elements -->
<script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Replace the SVG fallback with Lottie animation
        const heroAnimation = document.getElementById('hero-animation');
        if (heroAnimation) {
            heroAnimation.innerHTML = '<lottie-player src="https://assets1.lottiefiles.com/packages/lf20_vkqybeu5.json" background="transparent" speed="1" loop autoplay></lottie-player>';
        }
    });
    
    // Add custom template filters to handle data in templates
    // These functions would normally be defined in Django template tags
    // but we're adding them here for demonstration purposes
    window.get_item = function(obj, key) {
        return obj && obj[key] ? obj[key] : [];
    };
    
    window.range = function(count) {
        return Array.from({length: count}, (_, i) => i);
    };
    
    window.add = function(a, b) {
        return parseInt(a) + parseInt(b);
    };
    
    window.subtract = function(a, b) {
        return parseInt(a) - parseInt(b);
    };
    
    window.divide_by = function(a, b) {
        return Math.ceil(parseInt(a) / parseInt(b));
    };
    
    // Define authentication state for client-side
    window.isUserLoggedIn = {% if user.is_authenticated %}true{% else %}false{% endif %};
</script>
{% endblock %}